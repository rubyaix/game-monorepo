---
title: Roadmap
doc_type: roadmap
version: 1.0.0
status: active
owner: sangeunkim
last_updated: 2026-02-22
---

# Micro Drift 로드맵

## Phase 2: 카트라이더: 드리프트 메카닉 & 하이브리드 캐주얼 (Done)
**완료됨**: 카트라이더: 드리프트의 주행 감각을 이식하고, 하이브리드 캐주얼 스타일 및 게임다운 UI/VFX를 적용 완료.

### 물리엔진 & 드리프트 메카닉
- **Slip Angle 물리엔진**: 헤딩(차체 방향)과 실제 이동 방향(관성/moveHeading)을 분리하여, grip 계수에 따른 미끄러짐을 구현. 드리프트 시 grip=0.88, 일반 주행 시 grip=0.98.
- **톡톡이(끌기/Dragging)**: 드리프트 중 방향키를 입력하지 않으면 속도 패널티가 5→45로 경감되어 속도를 유지. 부스터 중에는 패널티가 0.15배로 감소하여 사실상 감속 없는 최고 속도 유지 가능.
- **커팅 드리프트**: 짧은 드리프트(0.1~0.4초)를 끊으면 접지력 즉시 회복 + 보너스 게이지 10 획득. 긴 드리프트(0.4초↑) 후 끊으면 순간 부스터 타이밍 창(0.5초) 활성화.
- **오프로드 감속**: 트랙 밖 이동 시 속도 50% 감소. 벽 충돌 시 0.3초 스턴 + 즉시 정지 + 부스터 해제.

### 부스터 시스템
- **드리프트 게이지**: 드리프트 중 초당 35 게이지 충전. 100 달성 시 자동으로 스택 1개 적립(최대 무제한 누적).
- **일반 부스터**: 스택 보유 시 전진 키(↑)로 발동. 속도 1.5배 × 1.5초 지속.
- **순간 부스터(Instant Boost)**: 긴 드리프트 해제 후 0.5초 내 전진 키 입력 시 발동. 속도 1.3배 × 0.5초.
- **출발 부스터(Start Boost)**: "GO!" 직후 0.4초 내 전진 키 입력 시 발동. 속도 1.4배 × 1.0초.
- **드래프팅(슬립스트림)**: 고스트/AI 카트 후방 30m 이내에서 0.8초간 유지 시 속도 1.15배 적용.

### 게임 UI 오버레이 (HUD)
- **풀스크린 투명 오버레이**: 기존의 네모난 반투명 박스(웹 UI 스타일)를 완전 삭제하고, 배경 없는 게임용 HUD로 교체.
  - **좌측 상단**: LAP 카운터 (노란색 이탤릭 2.2rem) + 실시간 랩 타이머 (흰색 1.6rem)
  - **우측 하단**: 원형 스피도미터 다이얼 (속도에 따라 시안→마젠타 그라디언트 아크가 280도 범위로 차오름) + 중앙에 대형 속도 숫자(3.5rem) + km/h 단위
  - **우측 하단**: 스큐(-15deg) 처리된 부스터 게이지 바 (핑크→마젠타 그라디언트, 충전 완료 시 시안→민트로 전환 + 글로우) + `x N` 부스터 스택 표시
  - **우측 상단**: RESTART 버튼 + GHOST 토글
- **카운트다운 UI**: 레이스 시작 시 화면 중앙에 3, 2, 1, GO! 카운트다운 (8rem 볼드, 시안 네온 글로우). GO! 시 녹색으로 전환.
- **Outfit 구글 폰트** 적용으로 전체 UI의 프리미엄감 확보.

### 시각 효과 (VFX)
- **3D 배기 화염(Exhaust Flames)**: 카트 후면에 시안/블루 발광 콘(ConeGeometry) 2개. 부스터 발동 시 랜덤 스케일(1.0~1.3)로 펄럭이며 등장, 해제 시 축소 소멸.
- **화면 플래시(Flash)**: 부스터 발동 시 화면 전체가 0.03초간 화이트아웃 후 0.4초간 페이드아웃.
- **부스터 텍스트 팝업**: "START BOOST!", "INSTANT BOOST!", "BOOST!" 등 발동된 부스터 종류가 화면 중앙에 5rem 텍스트로 0.8초간 스케일업 애니메이션과 함께 표시.
- **스피드라인(Vignette)**: 부스터 중 기본 속도 초과 시 화면 외곽에 보라색 래디얼 그라디언트 비네팅이 점점 짙어짐.
- **FOV 동적 변화**: 부스터 중 카메라 시야각이 62→85도로 확대(줌아웃). 해제 시 부드럽게 복원.
- **카메라 떨림(Sway)**: 부스터 중 카메라 위치에 sin(t*30) 기반 미세 좌우 흔들림 + 1단 낮은 시점 적용.

### AI 레이싱 카트 (Phase 1 복원 + 확장)
- **5대 AI 카트**: 오렌지(0xff6633), 시안(0x33ccff), 노랑(0xffcc00), 초록(0x66ff66), 보라(0xcc66ff) 5색 카트가 트랙 위를 자율 주행.
- **다양한 속도/레인**: 각 AI마다 50~90 범위의 랜덤 속도 + 트랙 중심선 기준 ±80% 폭 내 랜덤 레인 오프셋. 속도는 매 프레임 미세하게 요동(±5/초)하여 자연스러운 느낌 연출.
- **레이스 초기화 연동**: `resetRunState()` 호출 시 AI 카트도 START 라인 근처에 50m 간격으로 재배치.

### 아트 스타일
- **파스텔 하이브리드 캐주얼 배경**: 민트/그레이 톤의 잔디(0xb8cdd2), 숄더(0xa2bac2), 도로(0x76879e), 벽(0xe6ebf0) 계열 복셀 블록.
- **네온 카트 디자인**: 마젠타(0xff00ff) 차체 + 시안(0x00ffff) 네온 범퍼/스포일러 + 어둡고 진한(0x111625) 바퀴.
- **사운드 시스템**: 톱니파 엔진음(속도 연동 주파수 90~180Hz), 밴드패스 드리프트 소음, 트라이앵글 웨이브 BGM 아르페지오, 피니시 효과음.

## Phase 3: 카트/트랙 선택 & PvE AI 레이싱 (Done)
**완료됨**: 5종 카트 선택, 3종 트랙 테마, 레이스 순위 시스템, 공격적 러버밴딩 AI 구현 완료.

### 5종 카트 라인업 (각 고유 스탯)
| 카트 | 색상 | SPD | ACC | DFT | BST | CRN | 특성 |
|------|------|-----|-----|-----|-----|-----|------|
| **Cotton** | 핑크/화이트 | 80 | 65 | 75 | 70 | 70 | 밸런스형 올라운더 |
| **Burst** | 옐로우/블랙 | 75 | 90 | 60 | 85 | 55 | 폭발적 가속력 |
| **Solid** | 블루/실버 | 90 | 55 | 55 | 65 | 60 | 최고 속도 & 그립 |
| **Marathon** | 레드/오렌지 | 78 | 60 | 70 | 95 | 65 | 긴 부스터 지속시간 |
| **Saber** | 시안/블랙 | 72 | 70 | 85 | 60 | 95 | 최고 코너링 |

- 스탯 기반 `getKartTuning()`: 각 카트 스탯이 `baseSpeed`, `boosterMultiplier`, `driftChargeRate`, `steerRate`, `accelRate` 등 17개 튜닝 파라미터에 반영.
- 카트 메시에 고유 `bodyColor`와 `accentColor` 적용 (범퍼, 스포일러에 발광 악센트).

### 3종 테마 트랙
| 트랙 | 도로폭 | 턴반경 | 특징 |
|------|--------|--------|------|
| **Village Loop** | 36m | 60m | 넓은 도로, 완만한 커브, 밝은 데이타임 |
| **Sunset Canyon** | 28m | 40m | 좁은 헤어핀, 사막 열기, 황금빛 일몰 |
| **Neon City** | 32m | 35m | 급한 회전, 네온 조명, 야간 분위기 |

- 각 트랙마다 고유 색상 팔레트 (풀밭/숄더/도로/벽/하늘/안개/태양 7종 색상).
- 트랙 별 안개 거리/밀도, 앰비언트 조명 강도 커스텀.
- `applyTrackConfig()` + `buildTrackVisuals()` 동적 트랙 재생성.

### 카트/트랙 선택 UI
- **타이틀 → 카트 선택 → 트랙 선택 → 레이스** 3단계 플로우.
- **카트 선택 화면**: 5장 카드 그리드, 각 카드에 색상 프리뷰 + 이름 + 설명 + SPD/ACC/DFT/BST/CRN 스탯바(5색 그라디언트). 선택 시 시안 테두리 + 글로우.
- **트랙 선택 화면**: 3장 카드, 각 트랙 이름 + 설명 + 4색 스워치 프리뷰.
- AI 경쟁자 5대는 매 레이스마다 5종 카트 중 랜덤 선택하여 자동 배정.

### PvE AI 레이싱 시스템
- **공격적 러버밴딩**: 거리에 따라 6단계 속도 배율 (0.65x ~ 1.25x) 적용.
  - 120m+ 뒤처짐 → AI 스프린트 (1.25x)
  - 120m+ 앞섬 → AI 급감속 (0.65x)
  - 25m 이내 → 자연스러운 속도 변동 (0.98~1.06x)
- **랜덤 부스트**: 플레이어 근처(50m 이내)에서 30% 확률로 순간 가속 (1.2x, 최대 110km/h).
- **AI 랩 트래킹**: AI 카트도 트랙 진행도와 랩 카운트를 추적하여 3랩 완주 시 개별 피니시.

### 순위 & 결과 시스템
- **실시간 순위 표시**: HUD 좌측 상단에 "1st / 6" ~ "6th / 6" 순위 표시. 1등 = 금색, 2~3등 = 시안, 4~6등 = 빨강.
- **RACE RESULTS 화면**: 레이스 종료 후 최종 순위 + 전체 소요 시간 + 베스트 랩 표시.
- **스탠딩 목록**: 전체 6대(플레이어 + AI 5대) 순위 목록, 카트 색상 + 이름 + 시간 표시. 플레이어 행은 시안 하이라이트.

## Phase 4: 편의성 및 프레젠테이션 (Next)
- 로컬 스토리지(`localStorage`) 기반 베스트 랩타임, 스테이지 해금 동기화.
- 미니맵 렌더러 분리 제작.
- 물리 충돌 (몸싸움): AI 카트와 플레이어 간의 충돌 체적 구현.
- 추가 트랙 (5종 이상) 및 트랙 잠금 해제 시스템.

## 주요 기술 부채 해결 (Ongoing)
- 단일 `main.js` 모듈 분리 작업 (`track.js`, `kart.js`, `ai.js`)
- 코드 모듈화 (`audio`, `physics`, `track`, `ui`)
- 퍼포먼스 프로파일링/최적화
